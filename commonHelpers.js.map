{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/errorSvg.svg","../src/img/cautionSvg.svg","../src/img/informSvg.svg","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport axios from 'axios';\n\nexport const fetchImg = async (requestValue, page, perPage) => {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '44362034-5d7ab655544c2caf430070a80',\n      q: requestValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n};\n","export function markUp(imgs) {\n  return imgs.hits\n    .map(img => {\n      return `<li class=\"gallery-item\">\n  <a class=\"img-link\" href=\"${img.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n  </a>\n  <ul class=\"img-list\">\n    <li class=\"img-item\">\n      <h3 class=\"img-title\">Likes</h3>\n      <p class=\"img-text\">${img.likes}</p>\n    </li>\n    <li class=\"img-item\">\n      <h3 class=\"img-title\">Views</h3>\n      <p class=\"img-text\">${img.views}</p>\n    </li>\n    <li class=\"img-item\">\n      <h3 class=\"img-title\">Comments</h3>\n      <p class=\"img-text\">${img.comments}</p>\n    </li>\n    <li class=\"img-item\">\n      <h3 class=\"img-title\">Downloads</h3>\n      <p class=\"img-text\">${img.downloads}</p>\n    </li>\n  </ul>\n</li>`;\n    })\n    .join('');\n}\n","export default \"__VITE_ASSET__5f1026d9__\"","export default \"__VITE_ASSET__e4020d54__\"","export default \"__VITE_ASSET__de944bc6__\"","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImg } from './js/pixabay-api';\nimport { markUp } from './js/render-functions';\n\nimport errorSvg from './img/errorSvg.svg';\nimport cautionSvg from './img/cautionSvg.svg';\nimport informSvg from './img/informSvg.svg';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formElem = document.querySelector('.form');\nconst loaderElem = document.querySelector('.loader');\nconst galleryElem = document.querySelector('.gallery');\nconst btnLoadElem = document.querySelector('.btn-load');\n\nlet page = 1;\nconst perPage = 15;\nlet totalPages = 0;\nlet requestValue = '';\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  if (!formElem.input.value.trim()) {\n    formElem.reset();\n    return;\n  }\n  try {\n    page = 1;\n    requestValue = '';\n    btnLoadElem.classList.add('visually-hidden');\n    galleryElem.innerHTML = '';\n    btnLoadElem.classList.remove('visually-hidden');\n    const fetchImgData = await fetchImg(\n      formElem.input.value.trim(),\n      page,\n      perPage\n    );\n    if (!fetchImgData.total) {\n      iziToast.error({\n        iconUrl: errorSvg,\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    loaderElem.classList.add('visually-hidden');\n    galleryElem.insertAdjacentHTML('beforeend', markUp(fetchImgData));\n    gallery.refresh();\n    totalPages = Math.ceil(fetchImgData.totalHits / perPage);\n    requestValue = formElem.input.value.trim();\n    if (page < totalPages) {\n      btnLoadElem.classList.remove('visually-hidden');\n    }\n  } catch (error) {\n    loaderElem.classList.add('visually-hidden');\n    iziToast.warning({\n      iconUrl: cautionSvg,\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n  formElem.reset();\n});\n\nbtnLoadElem.addEventListener('click', async e => {\n  page += 1;\n  if (page === totalPages) {\n    iziToast.info({\n      iconUrl: informSvg,\n      position: 'topRight',\n      backgroundColor: '#09f',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    btnLoadElem.classList.add('visually-hidden');\n    loaderElem.classList.add('visually-hidden');\n  }\n  try {\n    loaderElem.classList.remove('visually-hidden');\n    const fetchImgData = await fetchImg(requestValue, page, perPage);\n    loaderElem.classList.add('visually-hidden');\n    galleryElem.insertAdjacentHTML('beforeend', markUp(fetchImgData));\n    gallery.refresh();\n    window.scrollBy({\n      top: galleryElem.firstChild.getBoundingClientRect().height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    loaderElem.classList.add('visually-hidden');\n    iziToast.warning({\n      iconUrl: warningSvg,\n      position: 'topRight',\n      message: 'Whoops, something went wrong! We gonna fix it soon.',\n    });\n  }\n});\n"],"names":["fetchImg","requestValue","page","perPage","axios","markUp","imgs","img","errorSvg","cautionSvg","informSvg","formElem","loaderElem","galleryElem","btnLoadElem","totalPages","gallery","SimpleLightbox","e","fetchImgData","iziToast","error"],"mappings":"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"}